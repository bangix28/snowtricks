{% extends 'base.html.twig' %}
{% block stylesheets %}<link rel="stylesheet" href="{{ asset('assets/css/banner.css') }}">{% endblock %}
{% block title %}Hello IndexController!{% endblock %}

{% block body %}
    <div class="banner">
        <img src="https://via.placeholder.com/1600x450" class="banner-img img img-fluid" alt="banner of the website">
        <div class="text">
        <h2>Snowtricks trops fort</h2>
        </div>
        <div class="arrow">
            <a href="#post" class="badge badge-pill badge-dark">
            <i class="fas fa-arrow-down fa-5x"></i>
            </a>
        </div>
    </div>
    <div id="post" class="mr-3 ml-3 row">
        {% for post in tricks %}
            {% if post.images[0] is defined %}
                {% set defaultImage = 'assets/uploads/' ~ post.images[0] %}
            {% else %}
                {% set defaultImage = 'assets/img/trickdefault.jpg' %}
            {% endif %}
            <div class="card mx-4 mt-4 col-lg-2">
                <a href="{{ url('post_show',{'id' : post.id}) }}">
                <img class="card-img-top img img-fluid" style="height: 200px" src="{{ defaultImage }}" alt="Card image cap"></a>
                <div class="card-body row">
                    <h6 class="card-title">{{ post.name }}</h6>

                    {% if app.user and app.user is same as post.user%}
                        <div class="ml-auto row">
                            {{ include('post/_delete_form.html.twig') }}
                            <a href="{{ url('post_edit', {'id' : post.id}) }}">
                                <i class="fas fa-edit align-top"></i>
                            </a>
                        </div>
                    {% endif %}
                </div>

            </div>

        {% endfor %}
        <button id="load" class="btn btn-primary">Load more</button>
    </div>
{% endblock %}
{% block javascripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
    <script>
        $('#load').click(function () {
            $.ajax({
                url: "{{ url('index') }}",
                type: 'POST',
                data: "loop=" + {{ loop }}
            })
        });
    </script>
{% endblock %}
